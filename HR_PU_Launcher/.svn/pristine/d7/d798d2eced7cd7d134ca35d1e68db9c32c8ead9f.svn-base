package com.mobilusauto.app.productionprocess;

import java.io.File;
import java.util.ArrayList;
import java.util.List;

import com.mobilusauto.app.productionprocess.R;

import android.app.Activity;
import android.bluetooth.BluetoothA2dp;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothProfile;
import android.bluetooth.BluetoothUuid;
import android.bluetooth.BluetoothProfile.ServiceListener;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.HMSIndex;
import android.content.Intent;
import android.content.IntentFilter;
import android.graphics.Color;
import android.media.*;
import android.media.AudioManager.OnAudioFocusChangeListener;
import android.media.MediaRecorder.*;
import android.os.Build;
import android.os.Bundle;
import android.os.Handler;
import android.os.IHMSCommunicationService;
import android.os.IYPService;
import android.os.Message;
import android.os.RemoteException;
import android.os.ServiceManager;
import android.os.SystemProperties;
import android.provider.Settings;
import android.util.Log;
import android.view.*;
import android.view.View.OnClickListener;
import android.widget.*;
import android.widget.RelativeLayout.LayoutParams;

public class TSPActivity extends Activity implements OnClickListener{
	private TextView mTitle;
	private Button mResultOK, mResultNG;
	private int mIndex;
	
	TextView mTVHidden1, mTVHidden2, mTVHidden3, mTVHidden4, mTVHidden5; 
	int mClickCount = 0;
	
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_common);
		
		mIndex = getIntent().getIntExtra("_key", 0);
		String[] _str = getResources().getStringArray(R.array.arListTitle);
		
		View _view = (View) findViewById(R.id.top);
		
		mTitle = (TextView) _view.findViewById(R.id.tv_title);
		mTitle.setText(_str[mIndex]);
		
		mResultOK = (Button) _view.findViewById(R.id.bt_result_ok);
		mResultOK.setOnClickListener(new OnClickListener() {
			@Override
			public void onClick(View arg0) {
				// TODO Auto-generated method stub
				MainActivity.getInstace().mSetResult(mIndex, MD_DEFINE.RESULT_OK);
//				onBackPressed();
				finish();
			}
		});
		
		
		mResultNG = (Button) _view.findViewById(R.id.bt_result_ng);
		mResultNG.setOnClickListener(new OnClickListener() {
			@Override
			public void onClick(View arg0) {
				// TODO Auto-generated method stub
				MainActivity.getInstace().mSetResult(mIndex, MD_DEFINE.RESULT_NG);
//				onBackPressed();
				finish();
			}
		});
		((TextView)_view.findViewById(R.id.tv_body)).setText(R.string.str_TSP_body);
		
		mTVHidden1 = (TextView)findViewById(R.id.tv_hideen1);
		mTVHidden2 = (TextView)findViewById(R.id.tv_hideen2);
		mTVHidden3 = (TextView)findViewById(R.id.tv_hideen3);
		mTVHidden4 = (TextView)findViewById(R.id.tv_hideen4);
		mTVHidden5 = (TextView)findViewById(R.id.tv_hideen5);
		mTVHidden1.setVisibility(View.VISIBLE);
		mTVHidden2.setVisibility(View.VISIBLE);
		mTVHidden3.setVisibility(View.VISIBLE);
		mTVHidden4.setVisibility(View.VISIBLE);
		mTVHidden5.setVisibility(View.VISIBLE);
		mTVHidden1.setOnClickListener(this);
		mTVHidden2.setOnClickListener(this);
		mTVHidden3.setOnClickListener(this);
		mTVHidden4.setOnClickListener(this);
		mTVHidden5.setOnClickListener(this);
		
		
       Settings.System.putInt(this.getContentResolver(),
                Settings.System.SHOW_TOUCHES,  1);
       
       Settings.System.putInt(this.getContentResolver(),
                Settings.System.POINTER_LOCATION, 1);
	}
	
	@Override
	protected void onResume() {
		// TODO Auto-generated method stub
		super.onResume();
		mResultOK.setEnabled(false);
		mClickCount = 0;
	}
	
	@Override
	protected void onPause() {
		// TODO Auto-generated method stub
		Settings.System.putInt(this.getContentResolver(),
                Settings.System.SHOW_TOUCHES,  0);
       
        Settings.System.putInt(this.getContentResolver(),
                Settings.System.POINTER_LOCATION, 0);
       
		super.onPause();
	}
	
	@Override
	public void onBackPressed() {
		// TODO Auto-generated method stub
		//super.onBackPressed();
	}

	@Override
	public void onClick(View arg0) {
		// TODO Auto-generated method stub
		int _id = arg0.getId();
		switch(_id) {
			case R.id.tv_hideen1:	
				if(mClickCount == 0) {
					mClickCount ++;
					mTVHidden1.setBackgroundColor(Color.GRAY);
				}
				break;
			case R.id.tv_hideen2:	
				if(mClickCount == 1) {
					mClickCount ++;
					mTVHidden2.setBackgroundColor(Color.GRAY);
				}
				break;
			case R.id.tv_hideen3:	
				if(mClickCount == 2) {
					mClickCount ++;
					mTVHidden3.setBackgroundColor(Color.GRAY);
				}
				break;
			case R.id.tv_hideen4:	
				if(mClickCount == 3) {
					mClickCount ++;
					mTVHidden4.setBackgroundColor(Color.GRAY);
				}
				break;
			case R.id.tv_hideen5:	
				if(mClickCount == 4) {
					mClickCount ++;
					mTVHidden5.setBackgroundColor(Color.GRAY);
					mResultOK.setEnabled(true);
				}
				break;
		}
	}
}
